$(document).ready(function(){
  $(window).load(function() {
    $('#visual').pignoseLayerSlider({
      play: '.btn-play',
      pause: '.btn-pause',
      next: '.btn-next',
      prev: '.btn-prev'
    });
  });

  $('.del-user').click(function(e){
    if (confirm('<%= I18n.t("view.admin.users.bandongy") %>')) {
      e.preventDefault();
      user_id = $(this).attr('data-userid');
      $.ajax({
        url: '/admin/users/' + user_id,
        type: 'delete',
        dataType: 'json'
      })
      .done(function(response) {
        if (response.status_ok) {
          $('#del-user-' + user_id).remove();
          alert('<%= I18n.t("view.admin.users.xoathanhcong") %>');
        }else{
          alert('<%= I18n.t("view.admin.users.xoathatbai") %>');
        }
      })
      .fail(function() {
        alert('<%= I18n.t("error") %>');
      })
    }
  });

  $('.del-destination').click(function(e){
    if (confirm('<%= I18n.t("view.admin.users.bandongy") %>')) {
      e.preventDefault();
      destination_id = $(this).attr('data-destinationid');
      $.ajax({
        url: '/admin/destinations/' + destination_id,
        type: 'delete',
        dataType: 'json'
      })
      .done(function(response) {
        if (response.status_ok) {
          $('#del-destination-' + destination_id).remove();
          alert('<%= I18n.t("view.admin.users.xoathanhcong") %>');
        }else{
          alert('<%= I18n.t("view.admin.users.xoathatbai") %>');
        }
      })
      .fail(function() {
        alert('<%= I18n.t("error") %>');
      })
    }
  });

  $('.del-event').click(function(e){
    if (confirm('<%= I18n.t("view.admin.users.bandongy") %>')) {
      e.preventDefault();
      event_id = $(this).attr('data-eventid');
      $.ajax({
        url: '/admin/events/' + event_id,
        type: 'delete',
        dataType: 'json'
      })
      .done(function(response) {
        if (response.status_ok) {
          $('#del-event-' + event_id).remove();
          alert('<%= I18n.t("view.admin.users.xoathanhcong") %>');
        }else{
          alert('<%= I18n.t("view.admin.users.xoathatbai") %>');
        }
      })
      .fail(function() {
        alert('<%= I18n.t("error") %>');
      })
    }
  });

  $('.del-join-event').click(function(e){
    if (confirm('<%= I18n.t("view.admin.users.bandongy") %>')) {
      e.preventDefault();
      join_event_id = $(this).attr('data-join-eventid');
      $.ajax({
        url: '/admin/join_events/' + join_event_id,
        type: 'delete',
        dataType: 'json'
      })
      .done(function(response) {
        if (response.status_ok) {
          $('#del-join-event-' + join_event_id).remove();
          alert('<%= I18n.t("view.admin.users.xoathanhcong") %>');
        }else{
          alert('<%= I18n.t("view.admin.users.xoathatbai") %>');
        }
      })
      .fail(function() {
        alert('<%= I18n.t("error") %>');
      })
    }
  });

  $('.datepicker').datepicker({
    format: 'dd/mm/yyyy',
    startDate: '-3d'
  });
});
